{% extends 'base_layout.html' %}
{% load static %}

{% block content %}

<body class="d-flex justify-content-center" style="height: 100vh;">
    <form action="{% url 'administrator:save_schedule' %}" method="post" class="p-4 border rounded" style="width: 600px; min-width: 300px;">
        {% csrf_token %}
        <div class="mb-3">
            <label for="coachSelect" class="form-label">Выберите тренера</label>
            <select name="coach" required class="form-select" id="coachSelect">
                <option value="" selected disabled>Не выбрано</option>
                {% for coach in coaches %}
                <option value="{{coach.id}}">{{ coach.get_full_name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="groupSelect" class="form-label">Выберите группу</label>
            <select name="group" required class="form-select" id="groupSelect">
                <option value="" selected disabled>Не выбрано</option>
                {% for group in all_groups %}
                <option value="{{group.id}}">{{ group.group_name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="hallSelect" class="form-label">Выберите зал</label>
            <select name="hall" required class="form-select" id="hallSelect">
                <option value="" selected disabled>Не выбрано</option>
                {% for hall in halls %}
                <option value="{{hall.id}}">{{ hall.hall_name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="periodSelect" class="form-label">Выберите период</label>
            <select name="period" required class="form-select" id="periodSelect">
                <option value="" selected disabled>Не выбрано</option>
                {% for period in periods %}
                <option value="{{period.id}}">{{ period.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label class="form-label">Выберите дни недели</label>
            {% for weekday in weekdays %}
             <div class="form-check">
                <input name="weekdays" class="form-check-input" type="checkbox" id="day-{{weekday.id}}" value="{{weekday.id}}">
                <label class="form-check-label" for="day-{{weekday.id}}">
                    {{weekday.name}}
                </label>
            </div>

            {% endfor %}
        </div>
        <div class="mb-3">
            <label for="weekdaysSelect" class="form-label">Выберите время тренировки</label>
            <br>
            <input name="start_time" required type="time" class="form-control-sm"> - <input name="end_time" required type="time" class="form-control-sm">
        </div>
        <div class="d-flex justify-content-center gap-1">
            <button type="submit" class="btn btn-primary w-100">Создать</button>
            <a href="{% url 'administrator:schedule' %}" class="btn btn-secondary w-100">Отменить</a>
        </div>


        {% if form.non_field_errors %}
        <div class="text-danger mt-3">
            {% for error in form.non_field_errors %}
            <p>{{ error }}</p>
            {% endfor %}
        </div>
        {% endif %}
    </form>
</body>
<script>
    // Делаем выбор дня недели обязательным полем 

    document.querySelector('form').addEventListener('submit', function(){
        let inputs = document.querySelectorAll('input[name="weekdays"]:checked')
        if (inputs.length === 0){
            alert('Выберите хотябы один день') 
        }
        
    })
</script>
{% endblock %}
